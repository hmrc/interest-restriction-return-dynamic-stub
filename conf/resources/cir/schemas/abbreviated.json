{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"title": "Submit Abbreviated IRR Request Schema",
	"type": "object",
	"required": [
		"agentDetails",
		"declaration",
		"groupCompanyDetails",
		"publicInfrastructure",
		"reportingCompany",
		"submissionType",
		"ukCompanies"
	],
	"properties": {
		"declaration": {
			"type": "boolean"
		},
		"agentDetails": {
			"type": "object",
			"required": ["agentActingOnBehalfOfCompany"],
			"properties": {
				"agentActingOnBehalfOfCompany": {
					"type": "boolean"
				},
				"agentName": {
					"type": "string",
					"pattern": "^[ -~?-??-??-??-??-??-???]{1,160}$"
				}
			}
		},
		"reportingCompany": {
			"type": "object",
			"required": [
				"companyName",
				"ctutr",
				"sameAsUltimateParent"
			],
			"properties": {
				"companyName": {
					"type": "string",
					"pattern": "^[ -~?-??-??-??-??-??-???]{1,160}$"
				},
				"ctutr": {
					"type": "string",
					"pattern": "^[0-9]{10}"
				},
				"sameAsUltimateParent": {
					"type": "boolean"
				}
			}
		},
		"parentCompany": {
			"type": "object",
			"properties": {
				"ultimateParent": {
					"$ref": "#/definitions/parentType"
				},
				"deemedParent": {
					"type": "array",
					"minItems": 2,
					"maxItems": 3,
					"items": {
						"$ref": "#/definitions/parentType"
					}
				}
			}
		},
		"publicInfrastructure": {
			"type": "boolean"
		},
		"groupCompanyDetails": {
			"type": "object",
			"required": [
				"accountingPeriod",
				"totalCompanies"
			],
			"properties": {
				"totalCompanies": {
					"type": "integer",
					"format": "int32"
				},
				"accountingPeriod": {
					"type": "object",
					"required": [
						"endDate",
						"startDate"
					],
					"properties": {
						"startDate": {
							"type": "string",
							"pattern": "^(((19|20)([2468][048]|[13579][26]|0[48])|2000)[-]02[-]29|((19|20)[0-9]{2}[-](0[469]|11)[-](0[1-9]|1[0-9]|2[0-9]|30)|(19|20)[0-9]{2}[-](0[13578]|1[02])[-](0[1-9]|[12][0-9]|3[01])|(19|20)[0-9]{2}[-]02[-](0[1-9]|1[0-9]|2[0-8])))$"
						},
						"endDate": {
							"type": "string",
							"pattern": "^(((19|20)([2468][048]|[13579][26]|0[48])|2000)[-]02[-]29|((19|20)[0-9]{2}[-](0[469]|11)[-](0[1-9]|1[0-9]|2[0-9]|30)|(19|20)[0-9]{2}[-](0[13578]|1[02])[-](0[1-9]|[12][0-9]|3[01])|(19|20)[0-9]{2}[-]02[-](0[1-9]|1[0-9]|2[0-8])))$"
						}
					}
				}
			}
		},
		"submissionType": {
			"type": "string",
			"enum": ["original", "revised"]
		},
		"revisedReturnDetails": {
			"type": "string",
			"pattern": "^[ -~?-????????-??-????-?]{1,5000}$"
		},
		"angie": {
			"type": "number",
			"minimum": 0,
			"exclusiveMinimum": false
		},
		"ukCompanies": {
			"type": "array",
			"minItems": 1,
			"maxItems": 2147483647,
			"items": {
				"type": "object",
				"required": [
					"companyName",
					"consenting",
					"qicElection",
					"utr"
				],
				"properties": {
					"companyName": {
						"type": "string",
						"pattern": "^[ -~?-??-??-??-??-??-???]{1,160}$"
					},
					"utr": {
						"type": "string",
						"pattern": "^[0-9]{10}$"
					},
					"consenting": {
						"type": "boolean"
					},
					"qicElection": {
						"type": "boolean"
					}
				}
			}
		},
		"groupLevelElections": {
			"type": "object",
			"required": [
				"activeInterestAllowanceAlternativeCalculation",
				"groupRatio",
				"interestAllowanceAlternativeCalculation",
				"interestAllowanceConsolidatedPartnership",
				"interestAllowanceNonConsolidatedInvestment"
			],
			"properties": {
				"groupRatio": {
					"type": "object",
					"required": [
						"activeGroupEBITDAChargeableGains",
						"isElected"
					],
					"properties": {
						"isElected": {
							"type": "boolean"
						},
						"groupRatioBlended": {
							"type": "object",
							"required": ["isElected"],
							"properties": {
								"isElected": {
									"type": "boolean"
								},
								"investorGroups": {
									"type": "array",
									"minItems": 1,
									"maxItems": 2147483647,
									"items": {
										"type": "object",
										"required": ["groupName"],
										"properties": {
											"groupName": {
												"type": "string",
												"pattern": "^[ -~?-??-??-??-??-??-???]{1,160}$"
											},
											"elections": {
												"type": "array",
												"minItems": 0,
												"maxItems": 5,
												"items": {
													"type": "string",
													"enum": [
														"groupRatioBlended",
														"groupEBITDA",
														"interestAllowanceAlternativeCalculation",
														"interestAllowanceNonConsolidatedInvestment",
														"interestAllowanceConsolidatedPartnership"
													]
												}
											}
										}
									}
								}
							}
						},
						"groupEBITDAChargeableGains": {
							"type": "boolean"
						},
						"activeGroupEBITDAChargeableGains": {
							"type": "boolean"
						}
					}
				},
				"interestAllowanceAlternativeCalculation": {
					"type": "boolean"
				},
				"activeInterestAllowanceAlternativeCalculation": {
					"type": "boolean"
				}
			}
		},
		"numberOfUkCompanies": {
			"type": "integer",
			"format": "int32"
		}
	},
	"definitions": {
		"parentType": {
			"type": "object",
			"required": [
				"companyName",
				"isUk"
			],
			"properties": {
				"isUk": {
					"type": "boolean"
				},
				"companyName": {
					"type": "string",
					"pattern": "^[ -~?-??-??-??-??-??-???]{1,160}$"
				},
				"ctutr": {
					"type": "string",
					"pattern": "[0-9]{10}"
				},
				"sautr": {
					"type": "string",
					"pattern": "[0-9]{10}"
				},
				"knownAs": {
					"type": "string",
					"pattern": "^[ -~?-??-??-??-??-??-???]{1,160}$"
				},
				"countryOfIncorporation": {
					"type": "string",
					"enum": ["AD", "AE", "AF", "AG", "AI", "AL", "AM", "AN", "AO", "AQ", "AR", "AS", "AT", "AU", "AW", "AX", "AZ", "BA", "BB", "BD", "BE", "BF", "BG", "BH", "BI", "BJ", "BM", "BN", "BO", "BQ", "BR", "BS", "BT", "BV", "BW", "BY", "BZ", "CA", "CC", "CD", "CF", "CG", "CH", "CI", "CK", "CL", "CM", "CN", "CO", "CR", "CS", "CU", "CV", "CW", "CX", "CY", "CZ", "DD", "DE", "DJ", "DK"]
				},
				"legalEntityIdentifier": {
					"type": "string",
					"pattern": "^[0-9A-Z]{18}[0-9]{2}$"
				}
			}
		}
	}
}
